{"version":3,"sources":["webpack:///./src/views/Signup.vue?b5ac","webpack:///src/views/Signup.vue","webpack:///./src/views/Signup.vue?e9bc","webpack:///./src/views/Signup.vue?9f49","webpack:///./src/views/Signup.vue?dfc4"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","scopedSlots","_u","key","fn","_v","proxy","attrs","on","$event","stopPropagation","preventDefault","signUp","apply","arguments","_l","item","id","_s","label","directives","name","rawName","value","expression","placeholder","domProps","Array","isArray","model","_i","$$a","$$el","target","$$c","checked","$$v","$$i","$set","concat","slice","_q","type","composing","isProcessing","staticRenderFns","components","InputTitle","InputForm","data","items","methods","Toast","icon","title","authorizationAPI","account","password","passwordCheck","token","localStorage","component"],"mappings":"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","file":"js/chunk-76472e24.757694c6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('InputTitle',{scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('h1',{staticClass:\"title-text\"},[_vm._v(\"建立你的帳號\")])]},proxy:true}])},[void 0],2),_c('form',{staticClass:\"form-items\",attrs:{\"action\":\"\"},on:{\"submit\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.signUp.apply(null, arguments)}}},[_vm._l((_vm.items),function(item){return _c('InputForm',{key:item.id,scopedSlots:_vm._u([{key:\"input\",fn:function(){return [_c('div',{staticClass:\"form-item\"},[_c('label',{staticClass:\"form-label\"},[_vm._v(_vm._s(item.label))]),((item.type)==='checkbox')?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(item.model),expression:\"item.model\"}],staticClass:\"form-input\",attrs:{\"name\":item.name,\"placeholder\":item.placeholder,\"required\":\"\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(item.model)?_vm._i(item.model,null)>-1:(item.model)},on:{\"change\":function($event){var $$a=item.model,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(item, \"model\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(item, \"model\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(item, \"model\", $$c)}}}}):((item.type)==='radio')?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(item.model),expression:\"item.model\"}],staticClass:\"form-input\",attrs:{\"name\":item.name,\"placeholder\":item.placeholder,\"required\":\"\",\"type\":\"radio\"},domProps:{\"checked\":_vm._q(item.model,null)},on:{\"change\":function($event){return _vm.$set(item, \"model\", null)}}}):_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(item.model),expression:\"item.model\"}],staticClass:\"form-input\",attrs:{\"name\":item.name,\"placeholder\":item.placeholder,\"required\":\"\",\"type\":item.type},domProps:{\"value\":(item.model)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(item, \"model\", $event.target.value)}}})])]},proxy:true}],null,true)})}),_c('div',{staticClass:\"form-btns\"},[_c('button',{staticClass:\"form-btn\",attrs:{\"type\":\"submit\"}},[_vm._v(_vm._s(_vm.isProcessing? '處理中':'註冊'))]),_c('div',{staticClass:\"form-cancel\"},[_c('router-link',{staticClass:\"form-cancel-btn\",attrs:{\"to\":\"/signin\"}},[_vm._v(\" 取消 \")])],1)])],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <InputTitle>\n      <template v-slot:title>\n        <h1 class=\"title-text\">建立你的帳號</h1>\n      </template>\n      <template> </template>\n    </InputTitle>\n\n    <form class=\"form-items\" action=\"\" @submit.stop.prevent=\"signUp\">\n\n      <InputForm v-for=\"item in items\" :key=\"item.id\">\n        <template v-slot:input>\n          <div class=\"form-item\">\n            <label class=\"form-label\">{{ item.label }}</label>\n            <input\n              v-model=\"item.model\"\n              class=\"form-input\"\n              :name=\"item.name\"\n              :type=\"item.type\"\n              :placeholder=\"item.placeholder\"\n              required\n            />\n          </div>\n        </template>\n      </InputForm>\n      \n      <!-- btn -->\n      <div class=\"form-btns\">\n        <button class=\"form-btn\" type=\"submit\">{{isProcessing? '處理中':'註冊'}}</button>\n        <div class=\"form-cancel\">\n          <router-link class=\"form-cancel-btn\" to=\"/signin\"> 取消 </router-link>\n        </div>\n      </div>\n      \n    </form>\n  </div>\n</template>\n\n<script>\nimport InputTitle from \"../components/InputTitle\";\nimport InputForm from \"../components/InputForm.vue\";\nimport authorizationAPI from \"../apis/authorization\"\nimport {Toast} from \"../utils/helpers\"\n\nexport default {\n  name: \"Signup\",\n  components: {\n    InputTitle,\n    InputForm,\n  },\n  data() {\n    return {\n      isProcessing: false,\n      items: [\n        {\n          id: 1,\n          label: \"帳號\",\n          name: \"account\",\n          type: \"text\",\n          placeholder: \"請輸入帳號\",\n          model: ''\n        },\n        {\n          id: 2,\n          label: \"名稱\",\n          name: \"name\",\n          type: \"text\",\n          placeholder: \"請輸入使用者名稱\",\n          model: ''\n        },\n        {\n          id: 3,\n          label: \"密碼\",\n          name: \"password\",\n          type: \"password\",\n          placeholder: \"請設定密碼\",\n          model: ''\n        },\n        {\n          id: 4,\n          label: \"密碼確認\",\n          name: \"passwordCheck\",\n          type: \"password\",\n          placeholder: \"請再次輸入密碼\",\n          model: ''\n        },\n      ],\n    };\n  },\n  methods:{\n    async signUp(){\n      //避免空白\n      if (\n        !this.items[0].model ||\n        !this.items[1].model ||\n        !this.items[2].model ||\n        !this.items[3].model \n      ){\n        Toast.fire({\n            icon: 'warning',\n            title: '請填寫完整資料，不可空白'\n          })\n        return \n      }\n      //密碼比對\n      if ( this.items[2].model !== this.items[3].model){\n         Toast.fire({\n            icon: 'warning',\n            title: '密碼和密碼確認不同，請再次確認'\n          })\n        return \n      }\n      try{\n        this.$socket.open()\n        this.isProcessing = true\n        const {data} = await authorizationAPI.signup({\n          account: this.items[0].model,\n          name: this.items[1].model,\n          password: this.items[2].model,\n          passwordCheck: this.items[3].model\n        })\n        if(data.status !== 'success'){\n          throw new Error (data.data.message)\n        }\n        // //socket傳送新註冊用戶資料\n        this.$socket.emit('user_login', data.data) \n        const token = data.data.token\n        //註冊後直接導向首頁\n        localStorage.setItem('token', token)\n        this.$store.commit('setToken', token)\n        this.$router.push('/chat')        \n      }catch(error){\n        this.isProcessing = false   \n        //重複註冊 \n        if (error.response.status === 409){\n            Toast.fire({\n            icon: 'warning',\n            title: error.response.data.message\n          })\n        } else {\n          //其他錯誤\n           Toast.fire({\n            icon: 'error',\n            title: error.response.data.message\n          })\n        }       \n      }      \n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../assets/scss/basic.scss\";\n.container {\n  width: 100vw;\n  max-width: 1140px;\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: center;\n  margin-right: auto;\n  margin-left: auto;\n}\n.title-text {\n  text-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\n}\n.form-btns {\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: center;\n}\n.form-btn {\n  @extend %button-orange;\n  width: 356px;\n  height: 46px;\n  margin-top: 32px;\n}\n.form-cancel {\n  margin-top: 16px;\n  text-align: center;\n  .form-cancel-btn {\n    color: $form-link-blue;\n    font-weight: 400;\n    font-size: 16px;\n    line-height: 24px;\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Signup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Signup.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Signup.vue?vue&type=template&id=62eb3f6c&scoped=true&\"\nimport script from \"./Signup.vue?vue&type=script&lang=js&\"\nexport * from \"./Signup.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Signup.vue?vue&type=style&index=0&id=62eb3f6c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"62eb3f6c\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Signup.vue?vue&type=style&index=0&id=62eb3f6c&lang=scss&scoped=true&\""],"sourceRoot":""}